<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Nutshack</title>
    <style>
        body {
            background-color: #f0e4d7;
            font-family: 'Courier New', Courier, monospace;
            color: #000;
            text-align: center;
            padding: 50px;
        }
        .container {
            border: 5px solid #8b4513;
            padding: 20px;
            display: inline-block;
            background-color: #d2b48c;
            box-shadow: 10px 10px 5px #888888;
            max-width: 800px;
            margin: auto;
        }
        h1 {
            color: #8b0000;
            font-size: 3em;
        }
        p {
            font-size: 1.2em;
        }
        .player-list {
            text-align: left;
            margin-top: 30px;
        }
        .player {
            margin-bottom: 20px;
        }
        .player h2 {
            margin: 10px 0;
            display: inline-block;
            font-size: 1.2em;
        }
        .live-status {
            display: inline-block;
            margin-left: 10px;
            font-weight: bold;
            font-size: 1.2em;
        }
        .icon {
            width: 24px;
            height: 24px;
            vertical-align: middle;
            margin: 0 5px;
        }
        .discord-name {
            font-size: 1.2em;
        }
        .player-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .player-info div {
            flex: 1;
        }
        .discord-button, .twitch-button {
            display: flex;
            align-items: center;
            background-color: #000;
            color: #fff;
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 5px;
            text-decoration: none;
            max-width: 190px;
            white-space: nowrap;
        }
        .discord-button img, .twitch-button img {
            margin-right: 5px;
        }
        .twitch-button {
            background-color: #593e84; /* Updated Twitch background color */
        }
        .twitch-button.offline {
            color: gray;
        }
        .twitch-button.live {
            color: red;
            animation: flash 1s infinite;
        }
        @keyframes flash {
            0%, 50%, 100% {
                opacity: 1;
            }
            25%, 75% {
                opacity: 0.5;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>wololo</h1>
        <p>hi there, if you've been given this URL in game, this page helps you find us so we can hang out some more!</p>
        <div class="player-list">
            <div class="player">
                <div class="player-info">
                    <div>
                        <h2>inertiacreeping</h2>
                    </div>
                    <div>
                        <a href="https://www.twitch.tv/inertiacreeping" target="_blank" class="twitch-button offline" id="twitch-inertiacreeping">
                            <img src="https://github.com/inertiacreeping/wololo/blob/main/twitch.png?raw=true" class="icon" alt="Twitch">
                            <span>OFFLINE</span>
                        </a>
                    </div>
                    <div>
                        <a href="https://discord.gg/XXvQE4uY2m" target="_blank" class="discord-button">
                            <img src="https://github.com/inertiacreeping/wololo/blob/main/discord.png?raw=true" class="icon" alt="Discord">
                            <span>Low ELO Legends</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="player">
                <div class="player-info">
                    <div>
                        <h2>shiderplays</h2>
                    </div>
                    <div>
                        <a href="https://www.twitch.tv/shiderplays" target="_blank" class="twitch-button offline" id="twitch-shiderplays">
                            <img src="https://github.com/inertiacreeping/wololo/blob/main/twitch.png?raw=true" class="icon" alt="Twitch">
                            <span>OFFLINE</span>
                        </a>
                    </div>
                    <div>
                        <a href="https://discord.gg/dzXthPsvKQ" target="_blank" class="discord-button">
                            <img src="https://github.com/inertiacreeping/wololo/blob/main/discord.png?raw=true" class="icon" alt="Discord">
                            <span>ShiderPlays</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="player">
                <div class="player-info">
                    <div>
                        <h2>chestnutplace77</h2>
                    </div>
                    <div>
                        <a href="https://www.twitch.tv/chestnutplace77" target="_blank" class="twitch-button offline" id="twitch-chestnutplace77">
                            <img src="https://github.com/inertiacreeping/wololo/blob/main/twitch.png?raw=true" class="icon" alt="Twitch">
                            <span>OFFLINE</span>
                        </a>
                    </div>
                    <div>
                        <a href="https://discord.gg/BGEA4HxY8u" target="_blank" class="discord-button">
                            <img src="https://github.com/inertiacreeping/wololo/blob/main/discord.png?raw=true" class="icon" alt="Discord">
                            <span>the nutshack</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <audio id="wololo-audio" src="https://github.com/inertiacreeping/wololo/blob/86d3d2a207c1a56970b48878cdbba47c180372e6/wololo.mp3?raw=true"></audio>
    <script>
        const clientId = 'wsp888x940dnqxdecdjmcrrz5kflb5';
        const accessToken = 'oy5z377gdk6qjwrswqh3usp034gof7';
        const streamers = ['inertiacreeping', 'shiderplays', 'chestnutplace77'];

        // Play audio every time the user visits the site
        window.addEventListener('load', () => {
            const audio = document.getElementById('wololo-audio');
            audio.play().catch(error => console.error('Audio play failed:', error));
        });

        async function checkLiveStatus() {
            for (const streamer of streamers) {
                const statusElement = document.getElementById(`twitch-${streamer}`);
                if (!statusElement) {
                    console.error(`Element with ID twitch-${streamer} not found`);
                    continue;
                }

                try {
                    const response = await fetch(`https://api.twitch.tv/helix/streams?user_login=${streamer}`, {
                        headers: {
                            'Client-ID': clientId,
                            'Authorization': `Bearer ${accessToken}`
                        }
                    });
                    const data = await response.json();
                    console.log(`Streamer: ${streamer}`, data); // Log the data for each streamer
                    const statusSpan = statusElement.querySelector('span');
                    if (data.data && data.data.length > 0 && data.data[0].type === 'live') {
                        statusSpan.textContent = 'LIVE';
                        statusElement.classList.remove('offline');
                        statusElement.classList.add('live');
                    } else {
                        statusSpan.textContent = 'OFFLINE';
                        statusElement.classList.remove('live');
                        statusElement.classList.add('offline');
                    }
                } catch (error) {
                    console.error(`Error fetching status for ${streamer}:`, error);
                    statusSpan.textContent = 'ERROR';
                    statusElement.classList.remove('live', 'offline');
                    statusElement.style.color = 'orange';
                }
            }
        }

        checkLiveStatus();
        setInterval(checkLiveStatus, 60000); // Check every 60 seconds
    </script>
</body>
</html>
